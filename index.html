<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <!-- Viewport para m√≥viles -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Calendario de Adviento 2025 üéÑ</title>

    <style>
        /* RESET B√ÅSICO */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            overflow-x: hidden;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            min-height: 100vh;
            color: #fff;
        }

        body > * {
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* COUNTDOWN */
        .countdown-screen {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #1a0a0a 0%, #4a1414 50%, #1a0a0a 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            overflow: hidden;
            padding: 16px;
            text-align: center;
        }

        .snowflake {
            position: absolute;
            top: -10px;
            color: white;
            font-size: 1.5rem;
            animation: fall linear infinite;
            opacity: 0.8;
            pointer-events: none;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        .countdown-content {
            z-index: 2;
            padding: 16px;
        }

        .countdown-title {
            font-size: clamp(1.8rem, 4vw, 3rem);
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 20px;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px #ffd700, 0 0 30px #ff6b6b; }
            50% { text-shadow: 0 0 30px #ffd700, 0 0 50px #ff6b6b; }
        }

        .countdown-timer {
            font-size: clamp(3rem, 10vw, 6rem);
            color: #fff;
            font-weight: 700;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.7);
            margin-bottom: 10px;
        }

        .countdown-label {
            font-size: clamp(1.2rem, 3vw, 2rem);
            color: #ffcccb;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        /* PANTALLA INTRO */
        .splash-screen {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100vh;
    background: #000;
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    overflow: hidden;
}

.splash-screen.active {
    display: flex;
}

/* V√≠deo ajustado al ancho, manteniendo aspecto, centrado vertical */
.splash-screen video {
    position: relative;
    width: 100%;
    height: auto;
    max-height: 100vh;
    object-fit: contain;
    object-position: center center;
}


/* Overlay por ENCIMA del v√≠deo, con su propio stacking context */
.start-overlay {
    position: relative;
    z-index: 2;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 16px;
    text-align: center;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.45);
    backface-visibility: hidden;
    transform: translateZ(0);
}

.start-overlay.hidden {
    display: none;
}


        .start-title {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            color: #ffd700;
            margin-bottom: 24px;
            text-shadow: 0 0 20px rgba(255,215,0,0.8);
        }

        .start-button {
            background: linear-gradient(135deg, #ffd700 0%, #ff6b6b 100%);
            color: white;
            border: none;
            padding: 14px 32px;
            font-size: 1.2rem;
            border-radius: 999px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 10px 30px rgba(255,215,0,0.5);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            animation: pulse 2s ease-in-out infinite;
            max-width: 90%;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .start-button:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(255,215,0,0.7);
        }

        .skip-button {
    position: fixed;         /* anclado al viewport, no al contenedor */
    bottom: 16px;
    right: 16px;
    background: rgba(0,0,0,0.75);
    color: #fff;
    border: 1px solid rgba(255,255,255,0.8);
    padding: 8px 14px;
    font-size: 0.9rem;
    border-radius: 999px;
    cursor: pointer;
    z-index: 10001;
    display: none;
}

.skip-button.visible {
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Ajuste extra para m√≥viles muy peque√±os */
@media (max-width: 480px) {
    .skip-button {
        bottom: 10px;
        right: 10px;
        padding: 6px 10px;
        font-size: 0.8rem;
    }
}


        .skip-button:hover {
            background: rgba(255,255,255,0.3);
        }

        /* CALENDARIO PRINCIPAL */
        .calendar-container {
            display: none;
            padding: 24px 16px 32px;
        }

        .calendar-container.active {
            display: block;
        }

        .header {
            text-align: center;
            margin-bottom: 24px;
            padding-inline: 8px;
        }

        .title {
            font-size: clamp(2rem, 4.5vw, 3.5rem);
            color: #ffd700;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
            margin-bottom: 8px;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        .days-until-christmas {
            font-size: clamp(1.1rem, 2.5vw, 1.6rem);
            color: #ffcccb;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.6);
            margin-top: 8px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
            gap: 14px;
            margin-top: 24px;
        }

        .day-card {
            aspect-ratio: 1 / 1;
            background: linear-gradient(135deg, #c31432 0%, #240b36 100%);
            border-radius: 18px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
            border: 2px solid #ffd700;
            padding: 8px;
        }

        .day-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            to { transform: rotate(360deg); }
        }

        .day-card:hover:not(.locked) {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 12px 30px rgba(255,215,0,0.5);
        }

        .day-card.locked {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            cursor: not-allowed;
            opacity: 0.7;
            border-color: #7f8c8d;
        }

        .day-card.opened {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            border-color: #2ecc71;
        }

        .day-number {
            font-size: clamp(1.8rem, 4vw, 2.8rem);
            font-weight: 700;
            color: #fff;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
            z-index: 1;
        }

        .day-icon {
            font-size: clamp(1.4rem, 3.2vw, 2rem);
            margin-top: 6px;
            z-index: 1;
        }

        .lock-icon {
            position: absolute;
            top: 6px;
            right: 6px;
            font-size: 1.2rem;
            z-index: 1;
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0,0,0,0.95);
            z-index: 10000;
            overflow-y: auto;
            padding: 16px;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            border-radius: 20px;
            max-width: 720px;
            width: 100%;
            padding: 24px 18px 24px;
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.8);
            border: 3px solid #ffd700;
        }

        .close-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            font-size: 1.6rem;
            color: #fff;
            cursor: pointer;
            width: 34px;
            height: 34px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(255,0,0,0.8);
            border-radius: 50%;
            transition: background 0.2s ease, transform 0.2s ease;
        }

        .close-btn:hover {
            background: rgba(255,0,0,1);
            transform: rotate(90deg) scale(1.05);
        }

        .modal-day-title {
            font-size: clamp(1.6rem, 3.5vw, 2.2rem);
            color: #ffd700;
            text-align: center;
            margin-bottom: 18px;
            margin-top: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            padding-inline: 8px;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: 14px;
            margin-bottom: 20px;
        }

        .video-container iframe,
        .video-container video {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        .clue-section {
            background: rgba(255,255,255,0.08);
            padding: 18px 14px;
            border-radius: 14px;
            margin-bottom: 16px;
            text-align: center;
        }

        .clue-title {
            font-size: 1.3rem;
            color: #ffcccb;
            margin-bottom: 10px;
        }

        .clue-text {
            font-size: 1.1rem;
            color: #fff;
            line-height: 1.6;
        }

        .reveal-section {
            text-align: center;
            margin-top: 12px;
        }

        .reveal-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 10px 26px;
            font-size: 1rem;
            border-radius: 999px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            max-width: 100%;
        }

        .reveal-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(245,87,108,0.5);
        }

        .reveal-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .timer-display {
            font-size: 1.1rem;
            color: #ffd700;
            margin-top: 10px;
        }

        .secret-location {
            background: rgba(255,215,0,0.18);
            padding: 14px 10px;
            border-radius: 14px;
            margin-top: 14px;
            border: 2px solid #ffd700;
        }

        .secret-text {
            font-size: 1.15rem;
            color: #ffd700;
            text-align: center;
            font-weight: 600;
        }

        /* CONTROL M√öSICA */
        .music-control {
            position: fixed;
            bottom: 14px;
            right: 14px;
            background: rgba(0,0,0,0.8);
            padding: 10px;
            border-radius: 999px;
            cursor: pointer;
            z-index: 1000;
            font-size: 1.4rem;
            border: 2px solid #ffd700;
            transition: transform 0.2s ease, background 0.2s ease;
        }

        .music-control:hover {
            transform: scale(1.05);
            background: rgba(255,215,0,0.9);
        }

        /* BREAKPOINTS */
        @media (max-width: 480px) {
            .calendar-container {
                padding-inline: 10px;
            }
            .calendar-grid {
                grid-template-columns: repeat(3, minmax(0, 1fr));
                gap: 10px;
            }
            .day-card {
                border-radius: 14px;
            }
            .modal-content {
                padding: 18px 12px 20px;
            }
            .close-btn {
                top: 8px;
                right: 8px;
            }
            .skip-button {
                bottom: 10px;
                right: 10px;
                padding: 6px 12px;
                font-size: 0.8rem;
            }
        }

        @media (min-width: 768px) {
            .calendar-container {
                padding: 32px 24px 40px;
            }
            .calendar-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 20px;
            }
            .modal-content {
                padding: 28px 22px 26px;
            }
        }

        @media (min-width: 1200px) {
            body {
                font-size: 18px;
            }
            .calendar-grid {
                gap: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Countdown Screen -->
    <div class="countdown-screen" id="countdownScreen">
        <div class="countdown-content">
            <div class="countdown-title">üéÑ Calendario de Adviento 2025 üéÖ</div>
            <div class="countdown-timer" id="countdownTimer">00</div>
            <div class="countdown-label">d√≠as hasta el 1 de Diciembre</div>
        </div>
    </div>

    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="start-overlay" id="startOverlay">
            <div class="start-title">üéÑ Calendario de Adviento 2025 üéÑ</div>
            <button class="start-button" onclick="startExperience()">‚ú® Comenzar ‚ú®</button>
        </div>
        <video
            id="splashVideo"
            loop
            muted
            playsinline
            preload="auto"
        >
            <source src="./Intro.mp4" type="video/mp4"> 
        </video>
        <button class="skip-button" id="skipButton" onclick="skipIntro()">Saltar ‚è≠Ô∏è</button>
    </div>

    <!-- Main Calendar -->
    <div class="calendar-container" id="calendarContainer">
        <div class="header">
            <h1 class="title">üéÑ Calendario de Adviento 2025 üéÑ</h1>
            <div class="days-until-christmas" id="daysUntilChristmas"></div>
        </div>

        <div class="calendar-grid" id="calendarGrid"></div>
    </div>

    <!-- Modal -->
    <div class="modal" id="dayModal">
        <div class="modal-content">
            <div class="close-btn" onclick="closeModal()">‚úï</div>
            <h2 class="modal-day-title" id="modalTitle"></h2>
            
            <div class="video-container" id="videoContainer"></div>

            <div class="clue-section">
                <h3 class="clue-title">üîç Pista del d√≠a</h3>
                <p class="clue-text" id="clueText"></p>
            </div>

            <div class="reveal-section">
                <button class="reveal-btn" id="revealBtn" onclick="startRevealTimer()">
                    üîì Revelar Secreto
                </button>
                <div class="timer-display" id="timerDisplay"></div>
                <div class="secret-location" id="secretLocation" style="display: none;">
                    <p class="secret-text" id="secretText"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Background Music -->
    <iframe id="bgMusic" src="" allow="autoplay" style="display: none;"></iframe>
    <div class="music-control" id="musicControl" onclick="toggleMusic()">üéµ</div>

    <script>
        // CONFIGURATION
        const SIMULATED_DATE = new Date('2024-12-24');
        const USE_SIMULATED_DATE = false;

        const USE_LOCAL_VIDEOS = true;
        const BG_MUSIC_URL = 'https://www.youtube.com/embed/TUVKd2PsDs0?autoplay=1&loop=1&playlist=TUVKd2PsDs0';
        
        const dayVideos = {
            1: 'dQw4w9WgXcQ', 2: 'dQw4w9WgXcQ', 3: 'dQw4w9WgXcQ', 4: 'dQw4w9WgXcQ',
            5: 'dQw4w9WgXcQ', 6: 'dQw4w9WgXcQ', 7: 'dQw4w9WgXcQ', 8: 'dQw4w9WgXcQ',
            9: 'dQw4w9WgXcQ', 10: 'dQw4w9WgXcQ', 11: 'dQw4w9WgXcQ', 12: 'dQw4w9WgXcQ',
            13: 'dQw4w9WgXcQ', 14: 'dQw4w9WgXcQ', 15: 'dQw4w9WgXcQ', 16: 'dQw4w9WgXcQ',
            17: 'dQw4w9WgXcQ', 18: 'dQw4w9WgXcQ', 19: 'dQw4w9WgXcQ', 20: 'dQw4w9WgXcQ',
            21: 'dQw4w9WgXcQ', 22: 'dQw4w9WgXcQ', 23: 'dQw4w9WgXcQ', 24: 'dQw4w9WgXcQ'
        };

        const localDayVideos = {
            1: 'videos/dia1.mp4', 2: 'videos/dia2.mp4', 3: 'videos/dia3.mp4', 4: 'videos/dia4.mp4',
            5: 'videos/dia5.mp4', 6: 'videos/dia6.mp4', 7: 'videos/dia7.mp4', 8: 'videos/dia8.mp4',
            9: 'videos/dia9.mp4', 10: 'videos/dia10.mp4', 11: 'videos/dia11.mp4', 12: 'videos/dia12.mp4',
            13: 'videos/dia13.mp4', 14: 'videos/dia14.mp4', 15: 'videos/dia15.mp4', 16: 'videos/dia16.mp4',
            17: 'videos/dia17.mp4', 18: 'videos/dia18.mp4', 19: 'videos/dia19.mp4', 20: 'videos/dia20.mp4',
            21: 'videos/dia21.mp4', 22: 'videos/dia22.mp4', 23: 'videos/dia23.mp4', 24: 'videos/dia24.mp4'
        };

        const cluesAndSecrets = {
            1: { clue: 'Busca donde guardes los recuerdos m√°s dulces del desayuno...', secret: '¬øHabr√° algo en el armario de la cocina?' },
            2: { clue: 'Mira donde nos sentamos a ver a Broncano...', secret: '¬øHabr√° algo debajo del sof√°?' },
            3: { clue: 'Donde las palabras cobran vida...', secret: '¬øMiraste entre los libros de la estanter√≠a?' },
            4: { clue: 'Busca en el reino del fr√≠o, donde los alimentos duermen...', secret: '¬øHabr√° algo en la nevera?' },
            5: { clue: 'Entre Mickey y Minnie', secret: '¬øHabr√° algo en la cama?' },
            6: { clue: 'Debajo de donde descansas tu cabeza cada noche...', secret: '¬øHabr√° algo bajo la almohada?' },
            7: { clue: 'Donde nos limpiamos despu√©s de un largo d√≠a...', secret: '¬øHabr√° algo en el ba√±o?' },
            8: { clue: 'Busca donde cuelga lo que te protege del fr√≠o...', secret: '¬øHabr√° algo en el perchero?' },
            9: { clue: 'Donde guardamos los tesoros que calzan nuestros pies...', secret: '¬øHabr√° algo en el zapatero?' },
            10: { clue: 'En el lugar donde la ropa espera a ser planchada', secret: '¬øHabr√° algo en el armario?' },
            11: { clue: 'Busca donde los platos descansan despu√©s de lavarse...', secret: '¬øHabr√° algo en la cocina?' },
            12: { clue: 'Donde guardamos los secretos del hogar limpio...', secret: '¬øHabr√° algo en el armario de la limpieza?' },
            13: { clue: 'Mira donde el tiempo marca sus segundos...', secret: '¬øHabr√° algo cerca del reloj del sal√≥n?' },
            14: { clue: 'Donde las especias a√±aden sabor a nuestras vidas...', secret: '¬øHabr√° algo en el carrito de las especias?' },
            15: { clue: 'Busca entre lo que te hace brillar cada ma√±ana...', secret: '¬øHabr√° algo en el caj√≥n del maquillaje' },
            16: { clue: 'Donde descansa el control del entretenimiento...', secret: '¬øHabr√° algo bajo la tele?' },
            17: { clue: 'En el caj√≥n donde se esconden los remedios al dolor', secret: '¬øHabr√° algo en el recibidor?' },
            18: { clue: 'Donde las llaves encuentran su hogar...', secret: '¬øHabr√° algo en el recibidor?' },
            19: { clue: 'Busca donde guardamos los cubiertos buenos', secret: '¬øHabr√° algo en el sal√≥n?' },
            20: { clue: 'Donde la comida se convierte en caliente por arte de magia...', secret: '¬øHabr√° algo en el microondas?' },
            21: { clue: 'Busca entre lo que te abriga durante las noches fr√≠as...', secret: '¬øHabr√° algo en el hueco de las mantas?' },
            22: { clue: 'Donde los calcetines duermen...', secret: '¬øHabr√° algo en el caj√≥n de los calceltines?' },
            23: { clue: 'Busca en el trono blanco...', secret: '¬øHabr√° algo en el WC?' },
            24: { clue: '¬°El √∫ltimo d√≠a! Busca donde brilla el √°rbol de navidad...', secret: '¬øHas mirado en el √°rbol?' }
        };

        const icons = ['üéÅ', '‚≠ê', 'üéÑ', '‚ùÑÔ∏è', 'üîî', 'üïØÔ∏è', 'ü¶å', 'üéÖ', '‚õÑ', 'üç¨', 'üß¶', 'üéÄ'];
        
        let musicPlaying = true;
        let revealTimers = {};
        let openedDays = JSON.parse(localStorage.getItem('openedDays') || '[]');

        function init() {
            const today = USE_SIMULATED_DATE ? SIMULATED_DATE : new Date();
            const adventStart = new Date(today.getFullYear(), 11, 1);
            
            if (today < adventStart) {
                showCountdown(today, adventStart);
            } else {
                showAdventCalendar(today);
            }
            
            createSnowflakes();
        }

        function showCountdown(today, adventStart) {
            const countdownTimer = document.getElementById('countdownTimer');
            const bgMusic = document.getElementById('bgMusic');
            
            bgMusic.src = BG_MUSIC_URL;
            
            function updateCountdown() {
                const now = USE_SIMULATED_DATE ? SIMULATED_DATE : new Date();
                const diff = adventStart - now;
                const days = Math.max(0, Math.ceil(diff / (1000 * 60 * 60 * 24)));
                countdownTimer.textContent = days;
            }
            
            updateCountdown();
            setInterval(updateCountdown, 60000);
        }

        function showAdventCalendar(today) {
            document.getElementById('countdownScreen').style.display = 'none';
            
            const splashScreen = document.getElementById('splashScreen');
            splashScreen.classList.add('active');
            
            generateCalendar(today);
            updateDaysUntilChristmas(today);
        }

        function startExperience() {
            const startOverlay = document.getElementById('startOverlay');
            const splashVideo = document.getElementById('splashVideo');
            const skipButton = document.getElementById('skipButton');
            
            startOverlay.classList.add('hidden');
            skipButton.classList.add('visible');
            
            // activar sonido al tener interacci√≥n del usuario
            splashVideo.muted = false;
            splashVideo.play().catch(() => {});
            
            splashVideo.addEventListener('ended', () => {
                skipIntro();
            });
            
            setTimeout(() => {
                const splashScreen = document.getElementById('splashScreen');
                if (splashScreen.classList.contains('active')) {
                    skipIntro();
                }
            }, 26500);
        }

        function skipIntro() {
            const splashScreen = document.getElementById('splashScreen');
            const splashVideo = document.getElementById('splashVideo');
            
            splashVideo.pause();
            splashScreen.classList.remove('active');
            document.getElementById('calendarContainer').classList.add('active');
            document.getElementById('bgMusic').src = BG_MUSIC_URL;
        }

        function generateCalendar(today) {
            const grid = document.getElementById('calendarGrid');
            const currentDay = today.getDate();
            const currentMonth = today.getMonth();
            
            for (let day = 1; day <= 24; day++) {
                const card = document.createElement('div');
                card.className = 'day-card';
                
                const isDecember = currentMonth === 11;
                const isLocked = !isDecember || day > currentDay;
                const isOpened = openedDays.includes(day);
                
                if (isLocked) card.classList.add('locked');
                if (isOpened) card.classList.add('opened');
                
                const icon = icons[day % icons.length];
                
                card.innerHTML = `
                    <div class="day-number">${day}</div>
                    <div class="day-icon">${icon}</div>
                    ${isLocked ? '<div class="lock-icon">üîí</div>' : ''}
                `;
                
                if (!isLocked) card.onclick = () => openDay(day);
                
                grid.appendChild(card);
            }
        }

        function updateDaysUntilChristmas(today) {
            const christmas = new Date(today.getFullYear(), 11, 25);
            const diff = christmas - today;
            const days = Math.max(0, Math.ceil(diff / (1000 * 60 * 60 * 24)));
            document.getElementById('daysUntilChristmas').textContent = `Faltan ${days} d√≠as para Navidad üéÖ`;
        }

        function openDay(day) {
            const modal = document.getElementById('dayModal');
            const videoContainer = document.getElementById('videoContainer');
            const bgMusic = document.getElementById('bgMusic');
            
            if (musicPlaying) {
                bgMusic.src = '';
            }
            
            document.getElementById('modalTitle').textContent = `D√≠a ${day} de Diciembre üéÑ`;
            document.getElementById('clueText').textContent = cluesAndSecrets[day].clue;
            document.getElementById('secretText').textContent = cluesAndSecrets[day].secret;
            
            videoContainer.innerHTML = '';
            
            if (USE_LOCAL_VIDEOS) {
                const video = document.createElement('video');
                video.controls = true;
                video.autoplay = true;
                video.playsInline = true;
                const source = document.createElement('source');
                source.src = localDayVideos[day];
                source.type = 'video/mp4';
                video.appendChild(source);
                videoContainer.appendChild(video);
            } else {
                const iframe = document.createElement('iframe');
                iframe.src = `https://www.youtube.com/embed/${dayVideos[day]}?autoplay=1`;
                iframe.allow = 'autoplay';
                videoContainer.appendChild(iframe);
            }
            
            document.getElementById('secretLocation').style.display = 'none';
            document.getElementById('timerDisplay').textContent = '';
            document.getElementById('revealBtn').disabled = false;
            document.getElementById('revealBtn').textContent = 'üîì Revelar Secreto';
            
            if (revealTimers[day]) {
                clearInterval(revealTimers[day]);
                delete revealTimers[day];
            }
            
            modal.classList.add('active');
            
            if (!openedDays.includes(day)) {
                openedDays.push(day);
                localStorage.setItem('openedDays', JSON.stringify(openedDays));
                
                const cards = document.querySelectorAll('.day-card');
                cards[day - 1].classList.add('opened');
            }
        }

        function closeModal() {
            const modal = document.getElementById('dayModal');
            const videoContainer = document.getElementById('videoContainer');
            const bgMusic = document.getElementById('bgMusic');
    
            videoContainer.innerHTML = '';
            modal.classList.remove('active');
    
            if (musicPlaying) {
                bgMusic.src = BG_MUSIC_URL;
            }
        }

        function startRevealTimer() {
            const revealBtn = document.getElementById('revealBtn');
            const timerDisplay = document.getElementById('timerDisplay');
            const secretLocation = document.getElementById('secretLocation');
            
            revealBtn.disabled = true;
            let timeLeft = 300;
            
            const currentDay = parseInt(document.getElementById('modalTitle').textContent.match(/\d+/)[0]);
            
            revealTimers[currentDay] = setInterval(() => {
                timeLeft--;
                
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerDisplay.textContent = `‚è≥ Espera ${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(revealTimers[currentDay]);
                    delete revealTimers[currentDay];
                    secretLocation.style.display = 'block';
                    timerDisplay.textContent = '';
                    revealBtn.textContent = '‚úÖ Secreto Revelado';
                }
            }, 1000);
        }

        function toggleMusic() {
            const bgMusic = document.getElementById('bgMusic');
            const musicControl = document.getElementById('musicControl');
            
            if (musicPlaying) {
                bgMusic.src = '';
                musicControl.textContent = 'üîá';
                musicPlaying = false;
            } else {
                bgMusic.src = BG_MUSIC_URL;
                musicControl.textContent = 'üéµ';
                musicPlaying = true;
            }
        }

        function createSnowflakes() {
            const countdownScreen = document.getElementById('countdownScreen');
            for (let i = 0; i < 50; i++) {
                const snowflake = document.createElement('div');
                snowflake.className = 'snowflake';
                snowflake.textContent = '‚ùÑ';
                snowflake.style.left = Math.random() * 100 + '%';
                snowflake.style.animationDuration = (Math.random() * 3 + 2) + 's';
                snowflake.style.animationDelay = Math.random() * 5 + 's';
                snowflake.style.fontSize = (Math.random() * 1 + 0.5) + 'em';
                countdownScreen.appendChild(snowflake);
            }
        }

        init();
    </script>
</body>
</html>
